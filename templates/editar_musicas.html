{% extends 'template.html' %}
{% block content %}
<div style="margin: 10px;">
<table class="table table-striped table-light" id="tabelamusicas">
<thead>
    <tr>
        <th style="display:none;">ID</th>
        <th>Título</th>
        <th>Artista</th>
        <th>Gênero</th>
        <th>Albúm</th>
        <th>Capa</th>
        <th>Vídeo</th>
        <th>Salvar</th>
        <th>Excluir</th>
    </tr>
</thead>
<tbody>
{% for musicas in musicas %}
                <tr>
                    <form action="{{ url_for('editar_musicas') }}" method="post" enctype="multipart/form-data">
                    <input type="hidden" id="id" name="id" value="{{ musicas.id }}">
                    <td style="display:none;">{{ musicas.titulo }}</td>
                    <td><input type="text" id="titulo" name="titulo" class="form-control col-sm-10 col-form-label" autocomplete="off" value="{{ musicas.titulo }}" required></td>
                    <td><input type="text" id="artista" name="artista" class="form-control col-sm-10 col-form-label" autocomplete="off" value="{{ musicas.artista }}" required></td>
                    <td><input type="text" id="genero" name="genero" class="form-control col-sm-10 col-form-label" autocomplete="off" value="{{ musicas.genero }}" required></td>
                    <td><input type="text" id="album" name="album" class="form-control col-sm-10 col-form-label" autocomplete="off" value="{{ musicas.album }}" required></td>
                    <td><a href = "{{ url_for('alterar_capa', capa=musicas.capa) }}" target="_blank"><img src="static/imagens/capas/{{musicas.capa}}"  height="50" width="50"></a></td>
                    <td><a class="btn btn-success float-left" href = "{{ url_for('alterar_video', video=musicas.video) }}" target="_blank">Alterar</a></td>
                    <td><button type="submit" class="btn btn-primary mr-2"><i class="fas fa-save"></i></button></td>
                    </form>
                    <td><button class="btn btn-danger" onclick="excluirItem({{ musicas.id }})"><i class="fas fa-trash"></i></button></td>
                </tr>
{% endfor %}
</tbody>
</table>
</div>

<script>
function excluirItem(id) {
  if (confirm("Tem certeza de que deseja excluir este item?")) {
    // Redirecionar para a rota de exclusão no lado do servidor, passando o ID como um parâmetro
    window.location.href = "/deletar_musica/" + id;
  } else {
    console.log("Exclusão cancelada!");
  }
}
</script>
<script type="text/javascript" src="/static/js/jquery-3.5.1.js"></script>
<script type="text/javascript" src="/static/js/jquery.dataTables.min.js"></script>

<script>
$(document).ready(function(){
  $('#tabelamusicas').DataTable({
    "order": [[ 0, "asc" ]],
        "language": {
            "lengthMenu": "Mostrando _MENU_ registros por página",
            "zeroRecords": "Nada encontrado",
            "search": "Pesquisa:",
            "info": "Mostrando página _PAGE_ de _PAGES_",
            "infoEmpty": "Nenhum registro disponível",
            "infoFiltered": "(filtrado de _MAX_ registros no total)",
                "paginate": {
    "first":      "Primeiro",
    "last":       "Último",
    "next":       "Próximo",
    "previous":   "Anterior"
},
        }
    });
});
</script>

{% endblock %}